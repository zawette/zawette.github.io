<!DOCTYPE html><html lang="en-GB"><head><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&amp;display=swap"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-af8d060cb140570bcfb2.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-2f612445bd50b211f15a.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-c8b51cc0a92c3008cd1b.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-940ab8a5466e61b1fe56.js" as="script"/><link rel="preload" href="/_next/static/chunks/527-bc799f66157b025f80e3.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bslug%5D-cf5824570b704d8f1766.js" as="script"/><style data-styled="" data-styled-version="5.3.0">html{line-height:1.15;-webkit-text-size-adjust:100%;}/*!sc*/
body{margin:0;}/*!sc*/
main{display:block;}/*!sc*/
h1{font-size:2em;margin:0.67em 0;}/*!sc*/
hr{box-sizing:content-box;height:0;overflow:visible;}/*!sc*/
pre{font-family:monospace,monospace;font-size:1em;}/*!sc*/
a{background-color:transparent;}/*!sc*/
abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;}/*!sc*/
b,strong{font-weight:bolder;}/*!sc*/
code,kbd,samp{font-family:monospace,monospace;font-size:1em;}/*!sc*/
small{font-size:80%;}/*!sc*/
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}/*!sc*/
sub{bottom:-0.25em;}/*!sc*/
sup{top:-0.5em;}/*!sc*/
img{border-style:none;}/*!sc*/
button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}/*!sc*/
button,input{overflow:visible;}/*!sc*/
button,select{text-transform:none;}/*!sc*/
button,[type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button;}/*!sc*/
button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}/*!sc*/
button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;}/*!sc*/
fieldset{padding:0.35em 0.75em 0.625em;}/*!sc*/
legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}/*!sc*/
progress{vertical-align:baseline;}/*!sc*/
textarea{overflow:auto;}/*!sc*/
[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}/*!sc*/
[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;}/*!sc*/
[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}/*!sc*/
[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}/*!sc*/
::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}/*!sc*/
details{display:block;}/*!sc*/
summary{display:list-item;}/*!sc*/
template{display:none;}/*!sc*/
[hidden]{display:none;}/*!sc*/
*{box-sizing:border-box;margin:0;padding:0;}/*!sc*/
html{font-size:62.5%;-webkit-scroll-behavior:smooth;-moz-scroll-behavior:smooth;-ms-scroll-behavior:smooth;scroll-behavior:smooth;}/*!sc*/
body{font-family:Space Grotesk,sans-serif;font-size:1.6rem;background:#222629;color:hsl(204,23.8%,95.9%);cursor:default;}/*!sc*/
h1,h2,h3,h4,h5,h6,button{font-family:Space Grotesk,sans-serif;}/*!sc*/
a{-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
li{list-style:none;}/*!sc*/
data-styled.g2[id="sc-global-cwOqod1"]{content:"sc-global-cwOqod1,"}/*!sc*/
.fKagYL{display:inline-block;margin-top:2rem;color:#86C232;font-size:1.5em;}/*!sc*/
.fKagYL:visited{color:#86C232;}/*!sc*/
data-styled.g9[id="PostStyles__PostPreviousBtn-yddrgk-6"]{content:"fKagYL,"}/*!sc*/
.hFActe{color:#86C232;-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
data-styled.g10[id="PostStyles__StyledLink-yddrgk-7"]{content:"hFActe,"}/*!sc*/
.jydxrj{margin:initial;}/*!sc*/
data-styled.g11[id="PostStyles__StyledParagraph-yddrgk-8"]{content:"jydxrj,"}/*!sc*/
.kMIpUK{margin:1.5rem;}/*!sc*/
data-styled.g12[id="PostStyles__StyledHeader1-yddrgk-9"]{content:"kMIpUK,"}/*!sc*/
.hgbNCx{margin:1.5rem;}/*!sc*/
data-styled.g13[id="PostStyles__StyledHeader2-yddrgk-10"]{content:"hgbNCx,"}/*!sc*/
.fINiPD{width:80%;margin:0 auto;}/*!sc*/
data-styled.g15[id="slug___StyledDiv-p3t8be-0"]{content:"fINiPD,"}/*!sc*/
</style><style data-href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap">@font-face{font-family:'Space Grotesk';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v16/V8mQoQDjQSkFtoMM3T6r8E7mF71Q-gOoraIAEj62UUsg.woff) format('woff')}@font-face{font-family:'Space Grotesk';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v16/V8mQoQDjQSkFtoMM3T6r8E7mF71Q-gOoraIAEj7oUUsg.woff) format('woff')}@font-face{font-family:'Space Grotesk';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v16/V8mQoQDjQSkFtoMM3T6r8E7mF71Q-gOoraIAEj7aUUsg.woff) format('woff')}@font-face{font-family:'Space Grotesk';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v16/V8mQoQDjQSkFtoMM3T6r8E7mF71Q-gOoraIAEj42Vksg.woff) format('woff')}@font-face{font-family:'Space Grotesk';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v16/V8mQoQDjQSkFtoMM3T6r8E7mF71Q-gOoraIAEj4PVksg.woff) format('woff')}@font-face{font-family:'Space Grotesk';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v16/V8mDoQDjQSkFtoMM3T6r8E7mPb54C_k3HqUtEw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Space Grotesk';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v16/V8mDoQDjQSkFtoMM3T6r8E7mPb94C_k3HqUtEw.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Space Grotesk';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v16/V8mDoQDjQSkFtoMM3T6r8E7mPbF4C_k3HqU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Space Grotesk';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v16/V8mDoQDjQSkFtoMM3T6r8E7mPb54C_k3HqUtEw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Space Grotesk';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v16/V8mDoQDjQSkFtoMM3T6r8E7mPb94C_k3HqUtEw.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Space Grotesk';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v16/V8mDoQDjQSkFtoMM3T6r8E7mPbF4C_k3HqU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Space Grotesk';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v16/V8mDoQDjQSkFtoMM3T6r8E7mPb54C_k3HqUtEw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Space Grotesk';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v16/V8mDoQDjQSkFtoMM3T6r8E7mPb94C_k3HqUtEw.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Space Grotesk';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v16/V8mDoQDjQSkFtoMM3T6r8E7mPbF4C_k3HqU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Space Grotesk';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v16/V8mDoQDjQSkFtoMM3T6r8E7mPb54C_k3HqUtEw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Space Grotesk';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v16/V8mDoQDjQSkFtoMM3T6r8E7mPb94C_k3HqUtEw.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Space Grotesk';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v16/V8mDoQDjQSkFtoMM3T6r8E7mPbF4C_k3HqU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Space Grotesk';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v16/V8mDoQDjQSkFtoMM3T6r8E7mPb54C_k3HqUtEw.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Space Grotesk';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v16/V8mDoQDjQSkFtoMM3T6r8E7mPb94C_k3HqUtEw.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Space Grotesk';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v16/V8mDoQDjQSkFtoMM3T6r8E7mPbF4C_k3HqU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div class="slug___StyledDiv-p3t8be-0 fINiPD"><a href="/blog" class="PostStyles__PostPreviousBtn-yddrgk-6 fKagYL">Go Back</a><hr style="width:50%;opacity:0.1;margin:2rem 0"/><div class="post"><div class="post-date">Posted on <!-- -->10/3/2021</div><div class="post-body"><h1 class="PostStyles__StyledHeader1-yddrgk-9 kMIpUK">Keeping track of my music using NodeJS</h1><p class="PostStyles__StyledParagraph-yddrgk-8 jydxrj">I have a very large collection of music stored locally on my computer, to keep track of it in case my pc dies, i decided to write a node script.</p><h2 class="PostStyles__StyledHeader2-yddrgk-10 hgbNCx">filtering audio files</h2><p class="PostStyles__StyledParagraph-yddrgk-8 jydxrj">I only have mp3 and wav files, so those are the only extensions i am interested in.</p><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-js" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> fs </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c792ea">require</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&quot;fs&quot;</span><span class="token token" style="color:#89ddff">)</span><span>
</span>
<span>fs</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">readdir</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&quot;..&quot;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#c792ea;font-style:italic">async</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token parameter">err</span><span class="token token parameter" style="color:#89ddff">,</span><span class="token token parameter"> files</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>  </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> filesTypes </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">[</span><span class="token token" style="color:#c3e88d">&quot;mp3&quot;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#c3e88d">&quot;wav&quot;</span><span class="token token" style="color:#89ddff">]</span><span>
</span><span>  </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> audioFiles </span><span class="token token" style="color:#89ddff">=</span><span> files</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">filter</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">(</span><span class="token token parameter">file</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span>
</span><span>    filesTypes</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">some</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">(</span><span class="token token parameter">ft</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> file</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">includes</span><span class="token token" style="color:#89ddff">(</span><span>ft</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span>
</span><span>  </span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span></code></pre><h2 class="PostStyles__StyledHeader2-yddrgk-10 hgbNCx">getting the metadata</h2><p class="PostStyles__StyledParagraph-yddrgk-8 jydxrj">Next we want to get the title, album, artist name and other metadata, for that purpose, i am using music-metadata npm package.
You can get it by running this command :</p><blockquote><p class="PostStyles__StyledParagraph-yddrgk-8 jydxrj">npm i music-metadata</p></blockquote><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-js" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token control-flow" style="color:#c792ea;font-style:italic">for</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token" style="color:#89ddff">[</span><span>index</span><span class="token token" style="color:#89ddff">,</span><span> af</span><span class="token token" style="color:#89ddff">]</span><span> </span><span class="token token" style="color:#c792ea;font-style:italic">of</span><span> audioFiles</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">entries</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>  </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> metadata </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">await</span><span> mm</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">parseFile</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&quot;../&quot;</span><span> </span><span class="token token" style="color:#89ddff">+</span><span> af</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>  </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> buffer </span><span class="token token" style="color:#89ddff">=</span><span> metadata</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">common</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">title</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">?</span><span> </span><span class="token token template-string template-punctuation" style="color:#c3e88d">`</span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">${</span><span class="token token template-string interpolation">metadata</span><span class="token token template-string interpolation" style="color:#89ddff">.</span><span class="token token template-string interpolation property-access">common</span><span class="token token template-string interpolation" style="color:#89ddff">.</span><span class="token token template-string interpolation property-access">artist</span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">}</span><span class="token token template-string" style="color:#c3e88d"> - </span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">${</span><span class="token token template-string interpolation">metadata</span><span class="token token template-string interpolation" style="color:#89ddff">.</span><span class="token token template-string interpolation property-access">common</span><span class="token token template-string interpolation" style="color:#89ddff">.</span><span class="token token template-string interpolation property-access">title</span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">}</span><span class="token token template-string" style="color:#c3e88d"> - </span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">${</span><span class="token token template-string interpolation">metadata</span><span class="token token template-string interpolation" style="color:#89ddff">.</span><span class="token token template-string interpolation property-access">common</span><span class="token token template-string interpolation" style="color:#89ddff">.</span><span class="token token template-string interpolation property-access">album</span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">}</span><span class="token token template-string template-punctuation" style="color:#c3e88d">`</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">:</span><span> af</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span></code></pre><h2 class="PostStyles__StyledHeader2-yddrgk-10 hgbNCx">Final code</h2><p class="PostStyles__StyledParagraph-yddrgk-8 jydxrj">finally we write the result into a text file,I personally keep the file on my onedrive. and optionally log the progress into the console.
here&#x27;s the final code. you can also find it on my <a href="https://github.com/zawette/useful-scripts/blob/main/list-music/getMusicZaw.js" class="PostStyles__StyledLink-yddrgk-7 hFActe">github</a></p><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-js" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> fs </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c792ea">require</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&quot;fs&quot;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> mm </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#c792ea">require</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&quot;music-metadata&quot;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span>fs</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">readdir</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&quot;..&quot;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#c792ea;font-style:italic">async</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token parameter">err</span><span class="token token parameter" style="color:#89ddff">,</span><span class="token token parameter"> files</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>  </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> filesTypes </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">[</span><span class="token token" style="color:#c3e88d">&quot;mp3&quot;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#c3e88d">&quot;wav&quot;</span><span class="token token" style="color:#89ddff">]</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>  </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> audioFiles </span><span class="token token" style="color:#89ddff">=</span><span> files</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">filter</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">(</span><span class="token token parameter">file</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span>
</span><span>    filesTypes</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">some</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">(</span><span class="token token parameter">ft</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> file</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">includes</span><span class="token token" style="color:#89ddff">(</span><span>ft</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span>
</span><span>  </span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>  </span><span class="token token" style="color:#c792ea;font-style:italic">var</span><span> outputFile </span><span class="token token" style="color:#89ddff">=</span><span> fs</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">createWriteStream</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&quot;musicList.txt&quot;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>  outputFile</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">write</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&quot;My Music List \n&quot;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span>
<span>  </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> afLength </span><span class="token token" style="color:#89ddff">=</span><span> audioFiles</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">length</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>  </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">for</span><span> </span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> </span><span class="token token" style="color:#89ddff">[</span><span>index</span><span class="token token" style="color:#89ddff">,</span><span> af</span><span class="token token" style="color:#89ddff">]</span><span> </span><span class="token token" style="color:#c792ea;font-style:italic">of</span><span> audioFiles</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">entries</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> metadata </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token control-flow" style="color:#c792ea;font-style:italic">await</span><span> mm</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">parseFile</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&quot;../&quot;</span><span> </span><span class="token token" style="color:#89ddff">+</span><span> af</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token" style="color:#c792ea;font-style:italic">const</span><span> buffer </span><span class="token token" style="color:#89ddff">=</span><span> metadata</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">common</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">title</span><span>
</span><span>      </span><span class="token token" style="color:#89ddff">?</span><span> </span><span class="token token template-string template-punctuation" style="color:#c3e88d">`</span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">${</span><span class="token token template-string interpolation">metadata</span><span class="token token template-string interpolation" style="color:#89ddff">.</span><span class="token token template-string interpolation property-access">common</span><span class="token token template-string interpolation" style="color:#89ddff">.</span><span class="token token template-string interpolation property-access">artist</span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">}</span><span class="token token template-string" style="color:#c3e88d"> - </span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">${</span><span class="token token template-string interpolation">metadata</span><span class="token token template-string interpolation" style="color:#89ddff">.</span><span class="token token template-string interpolation property-access">common</span><span class="token token template-string interpolation" style="color:#89ddff">.</span><span class="token token template-string interpolation property-access">title</span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">}</span><span class="token token template-string" style="color:#c3e88d"> - </span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">${</span><span class="token token template-string interpolation">metadata</span><span class="token token template-string interpolation" style="color:#89ddff">.</span><span class="token token template-string interpolation property-access">common</span><span class="token token template-string interpolation" style="color:#89ddff">.</span><span class="token token template-string interpolation property-access">album</span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">}</span><span class="token token template-string template-punctuation" style="color:#c3e88d">`</span><span>
</span><span>      </span><span class="token token" style="color:#89ddff">:</span><span> af</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token console" style="color:#f2ff00">console</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">log</span><span class="token token" style="color:#89ddff">(</span><span class="token token template-string template-punctuation" style="color:#c3e88d">`</span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">${</span><span class="token token template-string interpolation">index</span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">}</span><span class="token token template-string" style="color:#c3e88d"> of </span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">${</span><span class="token token template-string interpolation">afLength</span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">}</span><span class="token token template-string" style="color:#c3e88d"> -  </span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">${</span><span class="token token template-string interpolation">buffer</span><span class="token token template-string interpolation interpolation-punctuation" style="color:#89ddff">}</span><span class="token token template-string template-punctuation" style="color:#c3e88d">`</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    outputFile</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">write</span><span class="token token" style="color:#89ddff">(</span><span>buffer </span><span class="token token" style="color:#89ddff">+</span><span> </span><span class="token token" style="color:#c3e88d">&quot;\n&quot;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>  </span><span class="token token" style="color:#89ddff">}</span><span>
</span><span>  outputFile</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">end</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span></code></pre></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"title":"Keeping track of my music using NodeJS","date":"10/3/2021","excerpt":"I have a very large collection of music stored locally on my computer, to keep track of it in case my pc dies, i decided to write a  node script.","tags":["node","js"]},"slug":"ListingFiles","content":"\r\n# Keeping track of my music using NodeJS\r\n\r\nI have a very large collection of music stored locally on my computer, to keep track of it in case my pc dies, i decided to write a node script.\r\n\r\n## filtering audio files\r\n\r\nI only have mp3 and wav files, so those are the only extensions i am interested in.\r\n\r\n```js\r\nconst fs = require(\"fs\")\r\n\r\nfs.readdir(\"..\", async (err, files) =\u003e {\r\n  const filesTypes = [\"mp3\", \"wav\"]\r\n  const audioFiles = files.filter((file) =\u003e\r\n    filesTypes.some((ft) =\u003e file.includes(ft))\r\n  );\r\n}\r\n```\r\n\r\n## getting the metadata\r\n\r\nNext we want to get the title, album, artist name and other metadata, for that purpose, i am using music-metadata npm package.\r\nYou can get it by running this command :\r\n\r\n\u003e npm i music-metadata\r\n\r\n```js\r\nfor (const [index, af] of audioFiles.entries()) {\r\n  const metadata = await mm.parseFile(\"../\" + af);\r\n  const buffer = metadata.common.title\r\n    ? `${metadata.common.artist} - ${metadata.common.title} - ${metadata.common.album}`\r\n    : af;\r\n}\r\n```\r\n\r\n## Final code\r\n\r\nfinally we write the result into a text file,I personally keep the file on my onedrive. and optionally log the progress into the console.\r\nhere's the final code. you can also find it on my [github](https://github.com/zawette/useful-scripts/blob/main/list-music/getMusicZaw.js)\r\n\r\n```js\r\nconst fs = require(\"fs\");\r\nconst mm = require(\"music-metadata\");\r\n\r\nfs.readdir(\"..\", async (err, files) =\u003e {\r\n  const filesTypes = [\"mp3\", \"wav\"];\r\n  const audioFiles = files.filter((file) =\u003e\r\n    filesTypes.some((ft) =\u003e file.includes(ft))\r\n  );\r\n  var outputFile = fs.createWriteStream(\"musicList.txt\");\r\n  outputFile.write(\"My Music List \\n\");\r\n\r\n  const afLength = audioFiles.length;\r\n  for (const [index, af] of audioFiles.entries()) {\r\n    const metadata = await mm.parseFile(\"../\" + af);\r\n    const buffer = metadata.common.title\r\n      ? `${metadata.common.artist} - ${metadata.common.title} - ${metadata.common.album}`\r\n      : af;\r\n    console.log(`${index} of ${afLength} -  ${buffer}`);\r\n    outputFile.write(buffer + \"\\n\");\r\n  }\r\n  outputFile.end();\r\n});\r\n```\r\n"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"ListingFiles"},"buildId":"Cnyumnnyxl_hpSnboX3Nq","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-7b08e4c67f4f1b892f4b.js"></script><script src="/_next/static/chunks/webpack-af8d060cb140570bcfb2.js" async=""></script><script src="/_next/static/chunks/framework-2f612445bd50b211f15a.js" async=""></script><script src="/_next/static/chunks/main-c8b51cc0a92c3008cd1b.js" async=""></script><script src="/_next/static/chunks/pages/_app-940ab8a5466e61b1fe56.js" async=""></script><script src="/_next/static/chunks/527-bc799f66157b025f80e3.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-cf5824570b704d8f1766.js" async=""></script><script src="/_next/static/Cnyumnnyxl_hpSnboX3Nq/_buildManifest.js" async=""></script><script src="/_next/static/Cnyumnnyxl_hpSnboX3Nq/_ssgManifest.js" async=""></script></body></html>